{% extends 'marketing/base.html' %}
{% load static %}

{% block title %}Follow-Up Status - {% if follow_up %}Edit{% else %}Add New{% endif %}{% endblock %}

{% block content %}
<div class="mx-auto w-full p-2 md:p-4 xl:p-2">
    <!-- Modern Header -->
    <div class="mb-4">
        <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
            <div>
                <h1 class="text-2xl font-bold text-gray-900">{% if follow_up %}Edit Follow-Up Status{% else %}Add New Follow-Up Status{% endif %}</h1>
                <p class="text-sm text-gray-600">Track enquiry follow-up activities and status updates</p>
            </div>
            <a href="{% url 'marketing:follow_up_status_list' %}" class="inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm transition">
                <i data-lucide="arrow-left" class="w-4 h-4"></i>
                Back to Follow-Ups
            </a>
        </div>
    </div>

    <!-- Form Card -->
    <div class="rounded-lg border border-gray-200 bg-white shadow-sm">
        <form method="post" class="p-6 space-y-6">
            {% csrf_token %}
            
            <!-- Basic Information Section -->
            <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Basic Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label for="month" class="block text-sm font-medium text-gray-700 mb-2">
                            Month <span class="text-red-500">*</span>
                        </label>
                        <input type="text" 
                               id="month" 
                               name="month" 
                               value="{% if follow_up %}{{ follow_up.month }}{% endif %}"
                               class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                               placeholder="Enter month"
                               required>
                    </div>
                    <div>
                        <label for="date" class="block text-sm font-medium text-gray-700 mb-2">
                            Date <span class="text-red-500">*</span>
                        </label>
                        <input type="date" 
                               id="date" 
                               name="date" 
                               value="{% if follow_up %}{{ follow_up.date|date:'Y-m-d' }}{% endif %}"
                               class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                               required>
                    </div>
                    <div>
                        <label for="quote_no" class="block text-sm font-medium text-gray-700 mb-2">
                            Quote Number
                        </label>
                        <input type="text" 
                               id="quote_no" 
                               name="quote_no" 
                               value="{% if follow_up %}{{ follow_up.quote_no }}{% endif %}"
                               class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                               placeholder="Enter quote number">
                    </div>
                </div>
            </div>

            <!-- Responsible Person Section -->
            <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Responsible Person</h3>
                <div>
                    <label for="responsible_person" class="block text-sm font-medium text-gray-700 mb-2">
                        Responsible Person <span class="text-red-500">*</span>
                    </label>
                    <input type="text" 
                           id="responsible_person" 
                           name="responsible_person" 
                           value="{% if follow_up %}{{ follow_up.responsible_person }}{% endif %}"
                           class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                           placeholder="Enter responsible person name"
                           required>
                </div>
            </div>

            <!-- Company Information Section -->
            <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Company Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="company_group" class="block text-sm font-medium text-gray-700 mb-2">
                            Company / Group <span class="text-red-500">*</span>
                        </label>
                        <input type="text" 
                               id="company_group" 
                               name="company_group" 
                               value="{% if follow_up %}{{ follow_up.company_group }}{% endif %}"
                               class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                               placeholder="Enter company or group name"
                               required>
                    </div>
                    <div>
                        <label for="address" class="block text-sm font-medium text-gray-700 mb-2">
                            Address <span class="text-red-500">*</span>
                        </label>
                        <textarea id="address" 
                                  name="address" 
                                  rows="3" 
                                  class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                                  placeholder="Enter complete address"
                                  required>{% if follow_up %}{{ follow_up.address }}{% endif %}</textarea>
                    </div>
                </div>
            </div>

            <!-- Contact Information Section -->
            <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Contact Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label for="contact_person" class="block text-sm font-medium text-gray-700 mb-2">
                            Contact Person <span class="text-red-500">*</span>
                        </label>
                        <input type="text" 
                               id="contact_person" 
                               name="contact_person" 
                               value="{% if follow_up %}{{ follow_up.contact_person }}{% endif %}"
                               class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                               placeholder="Enter contact person name"
                               required>
                    </div>
                    <div>
                        <label for="contact_no" class="block text-sm font-medium text-gray-700 mb-2">
                            Contact Number <span class="text-red-500">*</span>
                        </label>
                        <input type="tel" 
                               id="contact_no" 
                               name="contact_no" 
                               value="{% if follow_up %}{{ follow_up.contact_no }}{% endif %}"
                               class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                               placeholder="Enter contact number"
                               required>
                    </div>
                    <div>
                        <label for="mail_id" class="block text-sm font-medium text-gray-700 mb-2">
                            Email ID <span class="text-red-500">*</span>
                        </label>
                        <input type="email" 
                               id="mail_id" 
                               name="mail_id" 
                               value="{% if follow_up %}{{ follow_up.mail_id }}{% endif %}"
                               class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                               placeholder="Enter email address"
                               required>
                    </div>
                </div>
            </div>

            <!-- Requirements Section -->
            <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Requirements</h3>
                <div>
                    <label for="requirements" class="block text-sm font-medium text-gray-700 mb-2">
                        Requirements <span class="text-red-500">*</span>
                    </label>
                    <textarea id="requirements" 
                              name="requirements" 
                              rows="4" 
                              class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                              placeholder="Enter detailed requirements"
                              required>{% if follow_up %}{{ follow_up.requirements }}{% endif %}</textarea>
                </div>
            </div>

            <!-- Follow-Up Information Section -->
            <div>
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Follow-Up Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="follow_up_date" class="block text-sm font-medium text-gray-700 mb-2">
                            Follow Up Date <span class="text-red-500">*</span>
                        </label>
                        <input type="date" 
                               id="follow_up_date" 
                               name="follow_up_date" 
                               value="{% if follow_up %}{{ follow_up.follow_up_date|date:'Y-m-d' }}{% endif %}"
                               class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                               required>
                    </div>
                    <div>
                        <label for="follow_up_status" class="block text-sm font-medium text-gray-700 mb-2">
                            Follow Up Status <span class="text-red-500">*</span>
                        </label>
                        <select id="follow_up_status" 
                                name="follow_up_status" 
                                class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500"
                                required>
                            <option value="">Select Status</option>
                            {% for key, value in status_choices %}
                                <option value="{{ key }}" {% if follow_up.follow_up_status == key %}selected{% endif %}>{{ value }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="flex items-center justify-end gap-3 pt-4 border-t border-gray-200">
                <a href="{% url 'marketing:follow_up_status_list' %}" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors">
                    Cancel
                </a>
                <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors">
                    <i data-lucide="save" class="w-4 h-4 inline mr-2"></i>
                    {% if follow_up %}Update{% else %}Save{% endif %} Follow-Up Status
                </button>
            </div>
        </form>
    </div>

    <!-- Help Section -->
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6">
        <h4 class="font-medium text-blue-900 mb-2">Follow-Up Status Tips</h4>
        <ul class="text-sm text-blue-800 space-y-1">
            <li>• All fields marked with * are required</li>
            <li>• Follow-up status helps track the progress of enquiries</li>
            <li>• Use specific dates for better tracking and reporting</li>
            <li>• Keep requirements detailed for better follow-up</li>
            <li>• Regular updates ensure accurate status tracking</li>
        </ul>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Create Lucide icons
    lucide.createIcons();
});
</script>
{% endblock %}
