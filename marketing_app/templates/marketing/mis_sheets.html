{% extends 'marketing/base.html' %}
{% load static %}

{% block title %}MIS Sheets - Marketing Hub{% endblock %}

{% block content %}
<div class="mx-auto w-full p-2 md:p-4 xl:p-2">
    <!-- Modern Header -->
    <div class="mb-4">
        <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
            <div>
                <h1 class="text-2xl font-bold text-gray-900">MIS Sheets</h1>
                <p class="text-sm text-gray-600">Complete tabbed interface for all MIS sheets with forms</p>
            </div>
            <a href="{% url 'marketing:mis_dashboard' %}" class="inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm transition">
                <i data-lucide="arrow-left" class="w-4 h-4"></i>
                Back to Dashboard
            </a>
        </div>
    </div>

    <!-- Tabbed Navigation -->
    <div class="rounded-lg border border-gray-200 bg-white shadow-sm mb-6">
        <div class="border-b border-gray-200">
            <nav class="-mb-px flex space-x-8 px-6 overflow-x-auto" aria-label="Tabs">
                <button type="button" onclick="switchTab('how-to-use')" 
                        id="tab-how-to-use"
                        class="tab-button active flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap">
                    <i data-lucide="help-circle" class="w-4 h-4"></i>
                    How to Use
                </button>
                <button type="button" onclick="switchTab('inquiry-log')" 
                        id="tab-inquiry-log"
                        class="tab-button flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap">
                    <i data-lucide="clipboard-list" class="w-4 h-4"></i>
                    Inquiry Log
                </button>
                <button type="button" onclick="switchTab('follow-up-status')" 
                        id="tab-follow-up-status"
                        class="tab-button flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap">
                    <i data-lucide="check-circle" class="w-4 h-4"></i>
                    Follow-Up Status
                </button>
                <button type="button" onclick="switchTab('project-today')" 
                        id="tab-project-today"
                        class="tab-button flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap">
                    <i data-lucide="briefcase" class="w-4 h-4"></i>
                    Project Today
                </button>
                <button type="button" onclick="switchTab('order-expected')" 
                        id="tab-order-expected"
                        class="tab-button flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap">
                    <i data-lucide="calendar" class="w-4 h-4"></i>
                    Order Expected
                </button>
                <button type="button" onclick="switchTab('purchase-order')" 
                        id="tab-purchase-order"
                        class="tab-button flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap">
                    <i data-lucide="shopping-cart" class="w-4 h-4"></i>
                    Purchase Order
                </button>
                <button type="button" onclick="switchTab('new-data')" 
                        id="tab-new-data"
                        class="tab-button flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap">
                    <i data-lucide="trending-up" class="w-4 h-4"></i>
                    New Data
                </button>
                <button type="button" onclick="switchTab('od-plan')" 
                        id="tab-od-plan"
                        class="tab-button flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap">
                    <i data-lucide="map-pin" class="w-4 h-4"></i>
                    OD Plan
                </button>
                <button type="button" onclick="switchTab('legends')" 
                        id="tab-legends"
                        class="tab-button flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap">
                    <i data-lucide="book-open" class="w-4 h-4"></i>
                    Legends
                </button>
            </nav>
        </div>

        <!-- Tab Content -->
        <div class="p-6">
            <!-- How to Use Tab -->
            <div id="content-how-to-use" class="tab-content">
                <div class="space-y-6">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-blue-900 mb-4 flex items-center gap-2">
                            <i data-lucide="info" class="w-5 h-5"></i>
                            MIS System Overview
                        </h3>
                        <p class="text-blue-800 mb-4">
                            This Management Information System (MIS) provides comprehensive tracking and management of all business activities. 
                            Created by <strong>Nikhil Badhe</strong>, it includes multiple sheets for different business processes.
                        </p>
                        
                        <h4 class="font-semibold text-blue-900 mb-3">Worksheet Directory:</h4>
                        <ul class="space-y-2 text-blue-800">
                            <li class="flex items-center gap-2">
                                <i data-lucide="check-circle" class="w-4 h-4 text-blue-600"></i>
                                <strong>Follow-Up Status:</strong> Used for Data Validation Entries, No need to take action
                            </li>
                            <li class="flex items-center gap-2">
                                <i data-lucide="briefcase" class="w-4 h-4 text-blue-600"></i>
                                <strong>Project Today:</strong> [Template sheet]
                            </li>
                            <li class="flex items-center gap-2">
                                <i data-lucide="calendar" class="w-4 h-4 text-blue-600"></i>
                                <strong>Order expected in Next Month:</strong> [Template sheet]
                            </li>
                            <li class="flex items-center gap-2">
                                <i data-lucide="shopping-cart" class="w-4 h-4 text-blue-600"></i>
                                <strong>Purchase Order Status:</strong> [Template sheet]
                            </li>
                            <li class="flex items-center gap-2">
                                <i data-lucide="book-open" class="w-4 h-4 text-blue-600"></i>
                                <strong>Legends:</strong> [Reference sheet]
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Inquiry Log Tab -->
            <div id="content-inquiry-log" class="tab-content hidden">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">Inquiry Log Management</h3>
                    <a href="{% url 'marketing:inquiry_log_list' %}" class="inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm transition">
                        <i data-lucide="list" class="w-4 h-4"></i>
                        View All Entries
                    </a>
                </div>
                <p class="text-gray-600 mb-4">Manage your business inquiries and track quote status.</p>
                
                <!-- Include Inquiry Log Form -->
                {% include 'marketing/inquiry_log_tab_form.html' %}
            </div>

            <!-- Follow-Up Status Tab -->
            <div id="content-follow-up-status" class="tab-content hidden">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">Follow-Up Status Management</h3>
                    <a href="{% url 'marketing:follow_up_status_list' %}" class="inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm transition">
                        <i data-lucide="list" class="w-4 h-4"></i>
                        View All Entries
                    </a>
                </div>
                <p class="text-gray-600 mb-4">Track enquiry follow-up activities and status updates.</p>
                
                <!-- Include Follow-Up Status Form -->
                {% include 'marketing/follow_up_status_tab_form.html' %}
            </div>

            <!-- Project Today Tab -->
            <div id="content-project-today" class="tab-content hidden">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">Project Today Management</h3>
                </div>
                <p class="text-gray-600 mb-4">Current active project tracking and management.</p>
                
                <!-- Include Project Today Form -->
                {% include 'marketing/project_today_tab_form.html' %}
            </div>

            <!-- Order Expected Tab -->
            <div id="content-order-expected" class="tab-content hidden">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">Order Expected Next Month</h3>
                </div>
                <p class="text-gray-600 mb-4">Sales forecast tracking for upcoming months.</p>
                
                <!-- Include Order Expected Form -->
                {% include 'marketing/order_expected_tab_form.html' %}
            </div>

            <!-- Purchase Order Tab -->
            <div id="content-purchase-order" class="tab-content hidden">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">Purchase Order Management</h3>
                </div>
                <p class="text-gray-600 mb-4">Purchase order management and tracking.</p>
                
                <!-- Include Purchase Order Form -->
                {% include 'marketing/purchase_order_tab_form.html' %}
            </div>

            <!-- New Data Tab -->
            <div id="content-new-data" class="tab-content hidden">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">New Data Management</h3>
                </div>
                <p class="text-gray-600 mb-4">New customer acquisition tracking and monthly breakdown.</p>
                
                <!-- Include New Data Form -->
                {% include 'marketing/new_data_tab_form.html' %}
            </div>

            <!-- OD Plan Tab -->
            <div id="content-od-plan" class="tab-content hidden">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-gray-900">OD Plan Management</h3>
                </div>
                <p class="text-gray-600 mb-4">Outdoor Planning (Field visit planning) and management.</p>
                
                <!-- Include OD Plan Form -->
                {% include 'marketing/od_plan_tab_form.html' %}
            </div>

            <!-- Legends Tab -->
            <div id="content-legends" class="tab-content hidden">
                <h3 class="text-lg font-semibold text-gray-900 mb-6">Legends - Master Reference Data</h3>
                
                <!-- Follow-Up Status Categories -->
                <div class="mb-8">
                    <h4 class="text-md font-semibold text-gray-800 mb-4 flex items-center gap-2">
                        <i data-lucide="check-circle" class="w-4 h-4 text-blue-600"></i>
                        Follow-Up Status Categories
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="file-text" class="w-4 h-4 text-blue-600"></i>
                                <span class="font-medium text-blue-800">QTN Submitted</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="refresh-cw" class="w-4 h-4 text-blue-600"></i>
                                <span class="font-medium text-blue-800">QTN Followup</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="users" class="w-4 h-4 text-blue-600"></i>
                                <span class="font-medium text-blue-800">Technical Discussions</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="monitor" class="w-4 h-4 text-blue-600"></i>
                                <span class="font-medium text-blue-800">At Customer Desk</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="check-circle" class="w-4 h-4 text-blue-600"></i>
                                <span class="font-medium text-blue-800">Order Finalization (AP)</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="shopping-cart" class="w-4 h-4 text-blue-600"></i>
                                <span class="font-medium text-blue-800">PO Release (AP)</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="check" class="w-4 h-4 text-blue-600"></i>
                                <span class="font-medium text-blue-800">PO Acknowledge (AP)</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="clipboard" class="w-4 h-4 text-blue-600"></i>
                                <span class="font-medium text-blue-800">WO Prepared</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="pause" class="w-4 h-4 text-blue-600"></i>
                                <span class="font-medium text-blue-800">On-Hold (Customer end)</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="x-circle" class="w-4 h-4 text-blue-600"></i>
                                <span class="font-medium text-blue-800">Requirement Cancelled (Customer end)</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="x" class="w-4 h-4 text-red-600"></i>
                                <span class="font-medium text-red-800">1 - Order Loss</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="x" class="w-4 h-4 text-red-600"></i>
                                <span class="font-medium text-red-800">2 - Order Loss</span>
                            </div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i data-lucide="x" class="w-4 h-4 text-red-600"></i>
                                <span class="font-medium text-red-800">3 - Order Loss</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Project Today Categories -->
                <div class="mb-8">
                    <h4 class="text-md font-semibold text-gray-800 mb-4 flex items-center gap-2">
                        <i data-lucide="briefcase" class="w-4 h-4 text-green-600"></i>
                        Project Today Categories
                    </h4>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Pharmaceutical Industries -->
                        <div>
                            <h5 class="font-semibold text-green-800 mb-3">Pharmaceutical Industries:</h5>
                            <div class="space-y-2">
                                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                    <span class="font-medium text-green-800">API</span>
                                </div>
                                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                    <span class="font-medium text-green-800">Injectable</span>
                                </div>
                                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                    <span class="font-medium text-green-800">Formulation</span>
                                </div>
                                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                    <span class="font-medium text-green-800">Oncology</span>
                                </div>
                                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                    <span class="font-medium text-green-800">Intermediate</span>
                                </div>
                                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                                    <span class="font-medium text-green-800">Packaging</span>
                                </div>
                            </div>
                        </div>

                        <!-- Non-Pharmaceutical Industries -->
                        <div>
                            <h5 class="font-semibold text-purple-800 mb-3">Non-Pharmaceutical Industries:</h5>
                            <div class="space-y-2">
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">FMCG</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Chemical Industry</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Blood bank</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Oil & Gas Industry</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Cosmetics</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Textile</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Hospital</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Government</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Agri</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Dairy</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Veterinary</span>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <span class="font-medium text-purple-800">Other</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.tab-button {
    border-color: transparent;
    color: #6b7280;
}

.tab-button.active {
    border-color: #3b82f6;
    color: #1f2937;
}

.tab-button:hover {
    color: #374151;
    border-color: #d1d5db;
}

.tab-content {
    display: block;
}

.tab-content.hidden {
    display: none;
}
</style>

<script>
function switchTab(tabName) {
    // Hide all tab contents
    const contents = document.querySelectorAll('.tab-content');
    contents.forEach(content => content.classList.add('hidden'));
    
    // Remove active class from all tabs
    const tabs = document.querySelectorAll('.tab-button');
    tabs.forEach(tab => tab.classList.remove('active'));
    
    // Show selected tab content
    document.getElementById('content-' + tabName).classList.remove('hidden');
    
    // Add active class to selected tab
    document.getElementById('tab-' + tabName).classList.add('active');
}


document.addEventListener('DOMContentLoaded', function() {
    // Create Lucide icons
    lucide.createIcons();
});
</script>
{% endblock %}
